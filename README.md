# BPMN Generator Pro - Обновленная версия

## Что нового

✨ **Интеграция с Camunda Modeler** - автоматическое открытие файлов после создания/редактирования
✨ **Редактирование существующих моделей** - полная поддержка изменения .bpmn файлов
✨ **Новый справочник** - `editing-guide.md` с примерами редактирования
✨ **Улучшенный workflow** - цикл: генерация → просмотр в Camunda → правки → повтор

## Файлы

- `bpmn-generator-pro.skill` - обновленный skill (ZIP архив)
- `bpmn-generator-pro/` - распакованная структура skill
- `bpmn-generator-pro-old.skill` - оригинальная версия (бэкап)

## Структура skill

```
bpmn-generator-pro/
├── SKILL.md                              # Главная инструкция
├── references/
│   ├── xml-templates.md                  # XML шаблоны
│   ├── advanced-patterns.md              # Продвинутые паттерны
│   └── editing-guide.md                  # ⭐ НОВЫЙ: Гайд по редактированию
└── assets/
    └── example-loan-approval.bpmn        # Пример
```

## Использование

### Создание новой модели

```
Пользователь: "Создай BPMN процесс согласования заявки на отпуск"

Claude:
1. Анализирует описание процесса
2. Генерирует .bpmn файл
3. Предлагает открыть в Camunda Modeler
```

### Редактирование существующей модели

```
Пользователь: "Добавь в процесс approval.bpmn обработку ошибок для задачи Payment"

Claude:
1. Читает файл approval.bpmn
2. Анализирует структуру
3. Добавляет boundary error event
4. Добавляет задачу обработки ошибки
5. Сохраняет изменения
6. Предлагает открыть в Camunda Modeler
```

### Открытие в Camunda Modeler

После создания/редактирования Claude выполнит:
```bash
open -a "Camunda Modeler" "название-процесса.bpmn"
```

## Возможности

### Создание процессов
- ✅ Простые процессы (линейные, с одним решением)
- ✅ Средние процессы (несколько решений, 2-3 роли)
- ✅ Сложные процессы (параллельные потоки, 4+ ролей)
- ✅ Использование лейнов для разделения ролей
- ✅ Обработка исключений (error/timer boundary events)
- ✅ Multi-instance tasks (параллельная/последовательная обработка)
- ✅ Эскалации и таймауты
- ✅ Subprocesses и call activities

### Редактирование процессов
- ✅ Добавление/удаление задач
- ✅ Изменение типов гейтвеев
- ✅ Добавление boundary events (error, timer, message)
- ✅ Конвертация задач в multi-instance
- ✅ Добавление эскалаций
- ✅ Преобразование последовательных процессов в параллельные
- ✅ Переименование элементов
- ✅ Сохранение визуальной компоновки

### Best Practices
- ✅ Правильное именование (Verb + Object для задач)
- ✅ Вопросы для гейтвеев ("Approved?")
- ✅ Семантические имена для событий
- ✅ Сбалансированные гейтвеи (fork → join)
- ✅ Избежание anti-patterns
- ✅ Чистая визуальная компоновка

## Примеры использования

### Пример 1: Простой процесс
```
"Создай процесс обработки заказа: получение → проверка → упаковка → отправка"
```

### Пример 2: Процесс с согласованием
```
"Создай процесс согласования покупки:
- Менеджер проверяет заявку
- Если сумма > 10000, требуется согласование директора
- Если одобрено, создается заказ
- Если отклонено, отправляется уведомление"
```

### Пример 3: Параллельная обработка
```
"Создай процесс обработки заказа с параллельной проверкой:
- Одновременно проверяется склад, кредит и адрес
- После синхронизации оформляется заказ"
```

### Пример 4: Редактирование
```
"В файле order-process.bpmn добавь обработку ошибки для задачи 'Process Payment':
- При ошибке оплаты отправить уведомление клиенту
- Завершить процесс как 'Payment Failed'"
```

### Пример 5: Добавление таймера
```
"В процессе approval.bpmn добавь эскалацию:
- Если задача 'Manager Approval' не выполнена за 2 дня
- Отправить уведомление директору (не прерывая задачу)"
```

## Технические детали

### Формат файлов
- BPMN 2.0 XML
- Совместимость с Camunda Modeler
- Включает Diagram Interchange (DI) для визуализации

### Путь к Camunda Modeler
```
/Applications/Camunda Modeler.app
```

### Поддерживаемые элементы
- События: Start, End, Intermediate, Boundary, Timer, Message, Signal, Error
- Задачи: User, Service, Script, Manual, Business Rule, Send, Receive
- Гейтвеи: Exclusive (XOR), Parallel (AND), Inclusive (OR), Event-Based
- Структуры: Subprocess, Call Activity, Transaction, Event Subprocess
- Дополнительно: Lanes, Pools, Multi-instance, Compensation

## Рекомендуемый Workflow

1. **Описание процесса** - расскажите Claude что нужно смоделировать
2. **Генерация** - Claude создает .bpmn файл
3. **Открытие в Camunda** - автоматически или по команде
4. **Визуальная проверка** - просмотр в Camunda Modeler
5. **Правки** (если нужны) - попросите Claude внести изменения
6. **Повтор шагов 3-5** - до получения идеального результата
7. **Финализация** - добавление стилей/цветов в Camunda (опционально)

## Справочные материалы

Внутри skill:
- `SKILL.md` - основные правила и паттерны
- `xml-templates.md` - шаблоны всех BPMN элементов
- `advanced-patterns.md` - 10 продвинутых паттернов
- `editing-guide.md` - примеры редактирования

## Установка skill в Claude Code

1. Скопируйте `bpmn-generator-pro.skill` в папку с вашими skills
2. Или используйте распакованную папку `bpmn-generator-pro/`
3. Skill автоматически активируется при упоминании BPMN/процессов

---

**Версия**: 2.0
**Дата обновления**: 08.12.2025
**Новые возможности**: Camunda Modeler integration + Editing support
